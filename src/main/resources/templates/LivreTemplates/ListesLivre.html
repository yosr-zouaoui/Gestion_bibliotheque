<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"  layout:decorate="~{layouts/dashboard}">

<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Bootstrap CSS -->
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
	integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
	crossorigin="anonymous">
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css"
	rel="stylesheet" type="text/css" />
<title>Listes des livres</title>
</head>

<body>
<div class="container-sm">
<h1 class="text-danger"> Listes des livres </h1>
<br><br>
<a class="btn btn-success btn-sm" th:href="@{/api/livre/createLivre}">Ajouter un nouvel livre</a>
<br><br>
<table class="table table-hover table-bordered" >
    <thead class="bg-secondary">
        <tr>
			<th scope="col">ISBN</th>
            <th scope="col">Titre</th>
            <th scope="col">Auteur</th>
           	<th scope="col">Genre</th>
           	<th scope="col">Langue </th>
           	<th scope="col">Année de publication </th>
           	<th scope="col">Quantité</th>
           	<th scope="col">Amendre par jour</th>
           	<th scope="col">Description</th>
        </tr>
    </thead>
    <tbody>
        <tr scope="row" th:each="livre : ${livres}">
            <td th:text="${livre.ISBN}"></td>
            <td th:text="${livre.titre}"></td>
            <td>
				<a th:href="@{'/api/auteurs/' + ${livre.auteur.auteur_id}}" target="_blank">
        			<span th:text="${livre.auteur.nom + ' ' + livre.auteur.prenom}"></span>
    			</a>
			</td>
            <td th:text="${livre.genre}"></td>
            <td th:text="${livre.langue}"></td>
            <td th:text="${livre.anneePublication}"></td>
            <td th:text="${livre.quantite}"></td>
            <td th:text="${livre.amendeParJour}"></td>
            <td th:text="${livre.description}"></td>
            <td>
            <!-- Add buttons for delete and update -->
            <form th:action="@{'/livres/delete/' + ${livre.livre_id}}" method="post">
                <input type="hidden" name="_method" value="delete" />
                <button type="submit" onClick="return confirm('sure?')" class="btn btn-danger btn-sm">Delete</button>
            
                <a th:href="@{'/livre/updateLivre/' + ${livre.livre_id}}" class="btn btn-primary btn-sm">Update</a>
            </form>
            
            </td>
        </tr>
    </tbody>
</table>

</div>
</body>
</html>